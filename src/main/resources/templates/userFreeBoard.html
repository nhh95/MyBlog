<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
  <head>
    <th:block layout:fragment="script">
      <script th:inline="javascript">
        const message = /*[[${msg}]]*/ "";
        if (message) alert(message);
      </script>
    </th:block>
    <style>
      table { width: 100%; border-collapse: collapse; }
      th, td { padding: 8px; border: 1px solid #ccc; }
      th { background: #f0f0f0; }
      .post-actions { margin-bottom: 1rem; }
    </style>
  </head>
  <section layout:fragment="content">
    <body>

      <h1>회원 자유게시판</h1>
      <hr/>

        <table class="post-list-table">
          <thead class="post-list-header">
            <tr>
              <th>ID</th>
              <th>제목</th>
              <th>작성자</th>
              <th>조회수</th>
              <th>작성일</th>
            </tr>
          </thead>
            <tbody class="post-list">
              <tr  th:each="post : ${boardList}">
                <td class="post-list-id" th:text="${post.id}">1</td>
                <td class="post-list-title">
                    <a th:href="@{/post/userFreeBoard/{id}(id=${post.id})}">
                        <span th:text="${post.title}">제목</span>
                        <span th:if="${post.commentCount > 0}"
                              th:text="'(' + ${post.commentCount} + ')'"
                              style="color: #666;">
                        </span>
                    </a>

                </td>
                <td class="post-list-nickname" th:text="${post.userNickname}">닉네임</td>
                <td class="post-list-viewcount" th:text="${post.viewCount}">0</td>
                <td class="post-list-createdAt" th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}">2025-08-01</td>
              </tr>

              <tr th:if="${#lists.isEmpty(boardList)}">
                <td colspan="6">게시물이 없습니다.</td>
              </tr>
            </tbody>
        </table>
      <hr/>
      <div class="create-post-button">
          <button type="button" th:onclick="|location.href='@{/post/createPost/{categoryName}(categoryName='UserFreeBoard')}'|">
              글쓰기
          </button>
      </div>
    </body>
  </section>
</html>